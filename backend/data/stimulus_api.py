"""Serve stimulus stories and DDM grids as API data."""
from fastapi import APIRouter

router = APIRouter(prefix="/api/stimulus", tags=["stimulus"])

NLM_READING_STORIES = {
    "1": {
        "benchmark": {
            "BOY": [
                {"id": "1-BM1-BOY", "title": "First Grade: Benchmark 1 (BOY)", "text": "Kam was on a rug with some little toys. A boy saw her toys and grabbed all of them. The boy did not hand them back, so Kam was sad. Kam sat on the rug and made a plan to get the toys. She was going to get them back. Kam decided to get help from her teacher, who was distracted by other kids. She asked her teacher, \"Can you please help me get my stolen blocks returned to me?\" Her teacher calmly replied, \"When I'm done teaching, I'll speak with your classmate and tell him he needs to share so that you can play together.\" After Kam sat back down, the boy started sharing because the teacher talked to him. Kam and the boy expertly fabricated a mansion that was expansive. Since it was a very big house with lots of rooms, she had to stand on her tiptoes to put the last block on. She was very pleased because they had collaborated together using the blocks which came from two big, deep tubs."},
                {"id": "1-BM2-BOY", "title": "First Grade: Benchmark 2 (BOY)", "text": "Last week, Jen sat on the grass with a rose bush that her mom got at a shop. Jen's mom told her to plant the bush, but it began to make her itch. Then her face started to get red, and she had to rub her nose a lot. Although she had quickly dropped the rose, her eyes started watering too. She was upset because the itching wouldn't cease. She immediately went inside because she was miserable. Jen decided to tell her mom, who was in the kitchen. She frantically said, \"Mom, my eyes and nose really itch, and I need your help.\" Jen's mom helpfully said, \"You have allergies, which I know all about. Allergies can be caused by plants and can make you itch. I have some eye drops to help.\" When they went inside, her mom gently put the calming drops in her irritated eyes. Jen was pleased because her red eyes, that were swollen, stopped itching. After Jen got help, they finished planting the gorgeous rose bush together."},
            ],
            "MOY": [
                {"id": "1-BM1-MOY", "title": "First Grade: Benchmark 1 (MOY)", "text": "One day, Jack was in his room. He was getting ready to go swim in his big pool. When Jack was ready to go, his mom, who was strict, stopped him. She said he could not swim because he had not picked up his toys yet. Jack was upset. It was a beautiful, warm morning. He wanted to practice swimming with his new kickboard. A kickboard is a small, foam board which helps you float. You hold on to it so that you can practice kicking. But he had to tidy up his messy bedroom. He decided to get to work. Since he really wanted to swim, he worked hard. After Jack spent almost three hours cleaning, he urgently found his mom. He said, \"Can I swim now because I completely finished the tasks that you gave me?\" Jack's mom proudly replied, \"You cleaned your room so well. It is stunning!\" His mom was perfectly satisfied. Jack felt happy. He ate lunch, then he eagerly swam in the refreshing pool while his mom closely watched him."},
                {"id": "1-BM2-MOY", "title": "First Grade: Benchmark 2 (MOY)", "text": "One day, Ron was with his dad at a fun park. He wanted to go on all the fun rides. He stopped at a tall ride that was fast and spun a lot. He went on it. But at the end of the ride, he started to feel sick. He was scared because his stomach suddenly felt uneasy. Ron decided to find his dad, who was nearby. He urgently said, \"I went on a ride that rapidly rotated and I might throw up!\" Ron's dad replied, \"Since you feel sick, it sounds like you have motion sickness. Let's find a calm, relaxing place so that you can rest.\" Ron's dad told him about motion sickness. He explained it happens when you stop moving but the fluid in your ears doesn't and it can make you nauseous. His dad quickly found a nearby bench, and had Ron sit down. After several minutes, Ron felt relieved because he didn't feel sick anymore. Then he blissfully rode calmer carnival rides, which didn't spin, for the rest of the day."},
            ],
            "EOY": [
                {"id": "1-BM1-EOY", "title": "First Grade: Benchmark 1 (EOY)", "text": "One day, Owen was out playing in the rain. After he jumped in a big puddle, Owen got water in his new shoes. His shoes were not very tall, so they got wet. Owen was sad because his feet were very wet and cold. He knew he needed to get help. Owen ran to his mom, who was standing outside their apartment. He said, \"Can you help me? These shoes that I thought were waterproof are totally freezing my feet.\" When Owen's mom saw him, she pulled him under her umbrella since he was completely drenched. She kindly said, \"I think we have a raincoat and some old galoshes. Galoshes are really tall boots that are made of waterproof rubber. They should fit you.\" After she quickly found them, Owen's mom took off his soaking wet shoes and dumped out the water so that they wouldn't get ruined. Even though she struggled getting the galoshes on Owen's feet, she eventually succeeded. Owen was relieved because he was able to frolic in the puddles without getting wet."},
                {"id": "1-BM2-EOY", "title": "First Grade: Benchmark 2 (EOY)", "text": "Last week, Ben was at his dad's house. It was late and he was watching TV. His dad told him it was time to brush his teeth and go to bed. Ben was upset because he did not want to go to bed. After Ben brushed his teeth, he made a plan. Ben quickly pulled a book off the shelf. When his dad tucked him in, Ben timidly asked, \"Will you please read this story to me?\" Ben's dad, who studied the cover, said, \"This book, again? OK, but just a few pages since it's so late.\" It was a funny chapter book. Chapter books, which are long stories that are divided into smaller parts, usually don't have colorful drawings. His dad began dramatically reading the book using different voices. Ben's vivid imagination ran wild. He clearly pictured what was happening in the story! Although Ben was happy because he got to stay up late, he was getting tired. When his dad finished reading, he snuggled under the covers so that he could go to sleep."},
            ],
        },
    },
    "2": {
        "benchmark": {
            "BOY": [
                {"id": "2-BM1-BOY", "title": "Second Grade: Benchmark 1 (BOY)", "text": "Yesterday, Marta and her mom were shopping at a store. She needed to get a gift for her friend. She was upset because she didn't have much time. Marta was thinking about getting a game. Her friend had a new computer with lots of RAM, which helps it run fast and open many things all at the same time. She dug through the bin of games and finally found a great game. But sadly, she didn't have the money to buy it. Marta felt bad because she still didn't have a gift. After she put the game back, she decided to ask her artistic mom, who was very creative, for guidance. She urgently said, \"What should I give my best friend?\" Marta's mom said, \"Make her something at home. It will be more meaningful.\" Although Marta didn't have a lot of time, she was able to make the perfect gift. When her friend eagerly opened the present, she loved the beautiful, personalized gift. Marta was extremely happy because she got to give her friend something that she cherished."},
                {"id": "2-BM2-BOY", "title": "Second Grade: Benchmark 2 (BOY)", "text": "Last week, Cora was exploring a theme park. She wanted to go on all the big rides, but she was not able to because she was too short. Even though Cora was upset, she hoped to find other rides that were fun. After she looked for a while, Cora found a thrilling ride that was shaped like a giant snake, and it went really fast. But when she tried to get on it, a man, who wore a uniform, sadly told Cora she was too short. The man explained he had to enforce the strict safety regulations, which were rules that must be obeyed so that people don't get hurt. Cora felt disappointed because it seemed like she would never find a suitable ride. She decided to ask the man for help. Cora optimistically said, \"Can you show me a fun ride I'm tall enough for?\" He said, \"Yes! The Ferris wheel should be perfect!\" When she saw it, Cora quickly got on ride. After the exhilarating ride was finished, Cora was happy because she finally discovered a perfect, fun ride."},
            ],
            "MOY": [
                {"id": "2-BM1-MOY", "title": "Second Grade: Benchmark 1 (MOY)", "text": "One day, Daniel was in his art class making a small clay pot. When he was done, he went to pick up the pot, but it was stuck to the table, which made him nervous. Daniel decided to try to gently lift it off the table so that he wouldn't ruin it. But Daniel's pot was really stuck. Daniel was sad and put his head on the table. Finally, Daniel decided to get help. Daniel said to his teacher \"My pot is stuck!\" Daniel's teacher kindly said, \"Before I work with clay, I put canvas down because canvas is a thick cloth that is made from cotton. The clay won't adhere to it. Since your pot is already stuck, I'll remove it using a special technique.\" Then she quickly illustrated how to get it unstuck. Daniel closely observed the teacher, who had solved this problem many times, take some thin wire and deftly slide it under the pot. When he saw it easily come right off the table, Daniel immediately felt relieved because he wouldn't have to construct a new pot."},
                {"id": "2-BM2-MOY", "title": "Second Grade: Benchmark 2 (MOY)", "text": "On Sunday, Fiona, a very shy girl, was in the car with her family. They slowly pulled into her grandpa's big driveway. She saw lots of cars parked at her grandpa's house. Fiona was upset because she didn't know there would be so many people visiting her grandpa. Fiona decided to stick close to her outgoing, older brother. She held his hand so that she would feel better. But Fiona still felt uneasy. Even though she loved her grandpa, she didn't like big crowds. She decided to quietly talk to her brother, who always took care of her. Fiona said, \"Please help me find a quiet place.\" Her brother kindly answered, \"There are lots of people, which can feel overwhelming. Let's go to grandpa's den.\" His den was a small, extra room that was packed with books. After Fiona went to the room, she quickly found a book and snuggled up on her favorite, cozy chair. Fiona immediately felt relieved because it was nice and quiet. When it was time to leave, Fiona sweetly said goodbye to her grandpa."},
            ],
            "EOY": [
                {"id": "2-BM1-EOY", "title": "Second Grade: Benchmark 1 (EOY)", "text": "On Saturday, Jacob, who loved the outdoors, was fishing with his grandpa at a nearby river delta. The triangle-shaped piece of land, which formed when the fresh water of the river flowed into the salty water of the ocean, was their favorite place to fish. Jacob tried to cast the line into the brackish water, but his line snagged in a tree behind him. Jacob panicked and thought he could just pull the line free. But when Jacob whipped the line hard, it got caught even worse! Jacob was frustrated. He hesitated to ask his grandpa, an expert fisherman, for help because he was obviously having a great time. Jacob nervously asked, \"Grandpa, can you help me?\" His grandpa said, \"Happy to help! That's quite the snag!\" After his grandpa expertly untangled the badly twisted line from the tree, Jacob moved so that his line wouldn't get caught again and excitedly cast out into the water. Jacob almost immediately caught a big, beautiful fish! He felt elated because he had never caught a fish that big before."},
                {"id": "2-BM2-EOY", "title": "Second Grade: Benchmark 2 (EOY)", "text": "Last week, Luiz went outside to feed his pet goats. His goats, which are called Fainting goats, are very friendly. However, when they get scared, their legs get stiff and they fall over. When Luiz poured some grain into their feeder, he noticed there was only one goat in the pen. The other goat had escaped and was eating some thick, overgrown bushes in the backyard. Luiz felt worried because he didn't know how he would catch the goat that always ran from him. He decided to slowly approach the cagey goat so that he could capture it. But every time he got close, it quickly bounded away. Luiz was frustrated. He decided to ask his dad, who knew about goats, for advice. Luiz said, \"Do you have any tips for catching my goat?\" His dad replied, \"Grab a handful of grain. Since goats can't resist food, it should follow you.\" After Luiz held out his hand with some grain, he was relieved because the goat eagerly followed him into the pen. Then Luiz made sure the gate was tightly shut."},
            ],
        },
    },
    "3": {
        "benchmark": {
            "BOY": [
                {"id": "3-BM1-BOY", "title": "Third Grade: Benchmark 1 (BOY)", "text": "Last week, Carla, who loved dressing up, was painting her nails at the new kitchen counter. She had some glittery, pink nail polish. When she inadvertently knocked over the small bottle, she was worried because she didn't want to stain the counter. It was quickly spilling everywhere, so she swiftly picked up the messy bottle. She decided to get a rag. Although Carla tried to clean it up, the rag didn't work. The bright, sparkly liquid smeared all over. She felt panicked. She needed her mom's help since she couldn't clean up the nail polish. So she decided to show her mom the counter. Carla said, \"I accidentally spilled nail polish. I need your help so that I can clean it.\" Carla's mom said, \"These new countertops are granite which is a porous rock that absorbs liquids. That's why you couldn't scrub the stain off the counter. You need something to help extract the nail polish. Nail polish remover will probably work.\" After her mom easily removed the stain, Carla was relieved because the mess was gone. Then Carla and her mom painted their nails together."},
                {"id": "3-BM2-BOY", "title": "Third Grade: Benchmark 2 (BOY)", "text": "Last spring, Molly drove with her family to a park that had beautiful, rolling hills. After they arrived, they unloaded their bikes so that they could go trail riding. Molly's bike, which was usually in pristine condition, started making a horrible, grinding sound. She looked down and saw that the chain had fallen off, likely because her bike had been neglected all winter. Even though Molly was worried, she decided to try riding without the chain. She pedaled hard, but her bike wouldn't move! Molly felt frustrated because her bike seemed useless. She wondered if her dad, who was an avid bike-rider, would be able to help. Molly walked her bike over to him and said, \"Could you help fix my bike?\" Molly's dad patiently replied, \"You simply need your chain tightened. Without a functioning bike chain, your bike can't get energy from the pedals to move the wheels.\" Fortunately, her dad always came prepared with bike tools. After he tightened the chain, Molly began riding again. She was happy because her bike worked perfectly! Molly easily traversed the park trails all day with her family."},
            ],
            "MOY": [
                {"id": "3-BM1-MOY", "title": "Third Grade: Benchmark 1 (MOY)", "text": "Yesterday morning, Jen quietly walked into the kitchen. She got up early so that she could make breakfast for her mom. When Jen saw her dad in the kitchen, she asked him to help her make breakfast. But sadly, her dad was in a hurry. Jen was disappointed because she needed some help. She wanted to make fresh, delicious popovers, which are her mom's favorite breakfast. Popovers are fluffy rolls that are baked in muffin tins. They are made with lots of eggs and butter. Jen decided to try to bake the popovers independently. She found the recipe. But she quickly grew frustrated because she couldn't understand the convoluted instructions. She decided to wake up her sister, who was a fabulous cook. Jen hesitantly woke her sister up. She whispered, \"Will you please help me make mom's special breakfast?\" Although Jen's sister was very fatigued, she immediately said, \"I forgot what day it is. I'll be right there to help you.\" After Jen and her sister cooked the breakfast, she was happy since she got to prepare her mom a special breakfast. Her mom loved it."},
                {"id": "3-BM2-MOY", "title": "Third Grade: Benchmark 2 (MOY)", "text": "Yesterday, Cody was at home getting ready for school. He was looking for his homework, which was an elaborate report on glaciers. He had spent hours writing about how glaciers are valleys of ice that slowly move across the land because they are thousands of feet thick. But he couldn't find it in his backpack. Cody desperately needed it so that he could get it to his teacher, who was very stern. When Cody couldn't find his report anywhere in the house, he was devastated since it had taken him so long to write it. He finally realized he had probably left it in the car, which was usually very messy. Cody looked in the car, but it had just been cleaned. He was hysterical because he really needed that report. He decided to talk to his mom. He urgently said, \"I can't find my report! Do you have it?\" Cody's mom uneasily said, \"I might have thrown it away.\" Then Cody searched through the grimy trash and recovered it. After he found his report, Cody was relieved and vowed to always put his homework away."},
            ],
            "EOY": [
                {"id": "3-BM1-EOY", "title": "Third Grade: Benchmark 1 (EOY)", "text": "Once, Jake, a brave boy, was eating lunch at his friend's house since they didn't have school that day. His friend challenged him to eat a red chili pepper. Red chili peppers are a hot type of pepper which start out green but turn red as they ripen. When Jake bit into it, the fiery, spicy pepper burned his mouth. It was painful. He was worried because it wouldn't stop burning. Jake decided to drink some water to cool off his mouth. He quickly guzzled a glass of water. Although it helped some, Jake couldn't stop the burning. He felt panicked. Jake desperately turned to his friend, who loves eating spicy food, thinking he could help. He frantically said, \"My mouth is still burning. What should I do?\" Jake's friend calmly said, \"You need to slowly drink some milk so that your mouth will stop burning.\" After Jake deliberately sipped some milk that his friend quickly gave him, which took him a long time, he felt relieved because the intolerable, intense pain was finally gone. Jake never ate another one of those scorching peppers again."},
                {"id": "3-BM2-EOY", "title": "Third Grade: Benchmark 2 (EOY)", "text": "Saturday, Megan was in her room, counting her allowance. She wanted to spend the money she had been saving on a fun, new camera. But Megan's mom wasn't home to drive her to the store. She was unhappy. Megan impatiently decided to find her older brother, who just got his license. Although she found him, he couldn't drive her because his vehicle, an old, worn-out truck, was out of commission. Megan was annoyed since she couldn't find a ride. Then Megan decided to call her mom to see if she could help. She said, \"Can you take me shopping so I can buy an instant camera? They are so cool! The film that you put in the camera has special chemicals, which develop pictures in seconds!\" Megan's mom said, \"I'll be home soon. Make sure your room is clean - then I will gladly take you.\" After Megan's mom got home and inspected her room, she willingly gave her a ride. Megan was ecstatic because she finally got to purchase the camera she'd been desperately waiting to buy. She quickly took a picture of her mom to thank her."},
            ],
        },
    },
}

NLM_READING_STORIES["4"] = {"benchmark": {
    "BOY": [{"id": "4-BM1-BOY", "title": "Fourth Grade: Benchmark 1 (BOY)", "text": "Last month, Talia was at the county science fair with her project on renewable energy. She had built a small wind turbine, which converts wind into electricity, using recycled materials from her garage. When the judges approached her table, they noticed the turbine's blades weren't spinning. Talia was embarrassed because she had tested it multiple times and it had always worked flawlessly. She examined the device carefully and realized that one of the connections had come loose during transportation. Talia decided she needed to fix it quickly before the judges moved to the next exhibit. She reached into her toolkit and found some copper wire. Although her hands were trembling from nervousness, she carefully reconnected the loose wire to the motor. When she flipped the switch, the blades began spinning beautifully, generating enough electricity to illuminate a small LED bulb. The judges were impressed by her resourcefulness and her thorough understanding of how kinetic energy could be transformed into electrical energy. Talia felt proud because she had overcome a challenging situation and demonstrated real problem-solving skills."},
     {"id": "4-BM2-BOY", "title": "Fourth Grade: Benchmark 2 (BOY)", "text": "During summer vacation, Marcus and his family visited a marine biology research center near the coast. Marcus, who dreamed of becoming a marine biologist, was fascinated by the tide pool exhibits. He especially loved the sea anemones, which are colorful marine animals that look like flowers but use their tentacles to capture small prey. When the guide announced that visitors could gently touch some of the creatures in the interactive tide pool, Marcus eagerly reached in. However, he accidentally knocked over a small partition, causing water to splash onto the observation area. Marcus was mortified because everyone turned to look at him. He felt terrible about disrupting the exhibit. Marcus quickly apologized to the guide, who reassured him that accidents happen. The guide then invited Marcus to help her carefully rearrange the displaced starfish and hermit crabs. As they worked together, the guide explained how each organism contributed to the delicate ecosystem of the tide pool. By the end of the visit, Marcus had learned more than he ever expected and was grateful that the guide had transformed his embarrassing moment into an educational opportunity."}],
    "MOY": [{"id": "4-BM1-MOY", "title": "Fourth Grade: Benchmark 1 (MOY)", "text": "One winter morning, Priya discovered that the butterfly chrysalis she had been observing for weeks in her classroom terrarium had finally begun to crack open. A chrysalis is the protective casing that caterpillars form around themselves during metamorphosis, which is the remarkable biological process of transformation from larva to adult. Priya was thrilled because she had documented every stage of the caterpillar's development in her science journal. She quickly called her classmates over to watch. However, when the butterfly emerged, one of its delicate wings appeared crumpled and wouldn't unfold properly. Priya was concerned because she knew the butterfly needed both wings to fly and survive. She decided to research the problem on the classroom computer. After reading several articles, Priya learned that it sometimes takes several hours for a butterfly's wings to fully expand and harden after emerging. She suggested that the class be patient and observe without interfering. Throughout the afternoon, the students watched in amazement as the wing gradually straightened and expanded. By the end of the school day, the monarch butterfly was fluttering around the terrarium with beautifully symmetrical orange and black wings."}],
    "EOY": [{"id": "4-BM1-EOY", "title": "Fourth Grade: Benchmark 1 (EOY)", "text": "Last spring, Elena participated in her school's first-ever community garden project. Each student was assigned a small plot to grow vegetables, and Elena chose to plant tomatoes because they were her favorite. She carefully prepared the soil, planted the seedlings, and watered them every day after school. Several weeks later, Elena noticed that her tomato plants were turning yellow and wilting despite receiving plenty of water and sunlight. She was frustrated because other students' plots seemed to be thriving. Elena decided to consult with Mr. Rivera, the school custodian who was also an experienced gardener. He examined the soil and explained that the pH level was too acidic for tomatoes, which prefer slightly acidic to neutral soil. Mr. Rivera suggested adding some limestone to neutralize the excess acidity. He also showed Elena how to test the soil using a simple testing kit. After Elena carefully amended the soil following Mr. Rivera's instructions, her tomato plants began recovering within a week. By the end of the semester, Elena had harvested enough ripe, red tomatoes to share with her entire class. She was proud because she had learned that successful gardening requires understanding soil chemistry."}],
}}
NLM_READING_STORIES["5"] = {"benchmark": {
    "BOY": [{"id": "5-BM1-BOY", "title": "Fifth Grade: Benchmark 1 (BOY)", "text": "During their annual camping trip to the mountains, Aiden and his older sister, Sofia, decided to hike to a remote waterfall that their father had told them about. They had been walking along the well-marked trail for about an hour when they realized that a recent storm had caused a large section of the path to wash away. A mudslide, which occurs when saturated soil loses its stability and slides downhill, had obliterated the trail ahead. Aiden was apprehensive because they were far from the campsite and the sun was beginning to set. Sofia, who had completed a wilderness survival course the previous summer, remained calm and assessed their options. She noticed that the terrain to the left of the mudslide appeared stable enough to traverse carefully. Using a long branch as a walking stick, Sofia tested each step before committing her weight. Aiden followed her path precisely, placing his feet exactly where hers had been. Although the detour added thirty minutes to their hike, they safely navigated around the mudslide and eventually reached the waterfall, where the cascading water created a magnificent rainbow in the late afternoon sunlight."}],
    "MOY": [{"id": "5-BM1-MOY", "title": "Fifth Grade: Benchmark 1 (MOY)", "text": "Jasmine had been selected to represent her school in the regional spelling bee championship, but she was overwhelmed by anxiety. Even though she had practiced diligently for months, memorizing hundreds of obscure words and their etymologies, she couldn't shake the persistent fear that she would freeze onstage. Etymology is the study of the origin and historical development of words, and understanding it had helped Jasmine decode unfamiliar words by recognizing their Latin, Greek, or Germanic roots. The night before the competition, Jasmine confided in her grandmother, who had immigrated from Haiti decades ago and had learned English as her third language. Her grandmother told her about competing in her first debate in English, trembling so badly that her note cards scattered across the floor. Instead of being humiliated, she had picked them up and delivered her argument from memory, earning a standing ovation. She told Jasmine that courage isn't the absence of fear but the determination to persevere despite it. The next morning, when Jasmine stood at the microphone and heard the first word, her nervousness dissipated, replaced by the confidence that came from thorough preparation and her grandmother's wisdom."}],
    "EOY": [{"id": "5-BM1-EOY", "title": "Fifth Grade: Benchmark 1 (EOY)", "text": "When a fierce thunderstorm knocked out power to the entire neighborhood, Leo and his family found themselves in complete darkness. The refrigerator stopped humming, the air conditioning fell silent, and the television screen went black. Leo's younger twin siblings began crying because they were frightened by the sudden darkness and the booming thunder. Leo remembered that his science teacher had recently discussed how batteries store chemical energy that can be converted to electrical energy through electrochemical reactions. He quickly gathered several flashlights from the emergency kit in the garage and distributed them throughout the house. Then, remembering another lesson about thermal insulation, he suggested that the family keep the refrigerator closed to preserve the cold air inside and prevent food spoilage. His mother was impressed by his practical thinking. Together, the family gathered in the living room, where Leo organized a board game by flashlight. His siblings stopped crying as they became engrossed in the game. When the power was finally restored three hours later, Leo's mother told him she was proud of how he had transformed a potentially frightening situation into an enjoyable family evening through his calm leadership and scientific knowledge."}],
}}
NLM_READING_STORIES["6"] = {"benchmark": {
    "BOY": [{"id": "6-BM1-BOY", "title": "Sixth Grade: Benchmark 1 (BOY)", "text": "Maya had always been passionate about environmental conservation, so when she learned that a local wetland habitat was threatened by a proposed commercial development, she felt compelled to take action. Wetlands are transitional ecosystems between terrestrial and aquatic environments that provide crucial services including water filtration, flood prevention, and habitat for countless species of wildlife. Maya began by researching the ecological significance of the specific wetland in question and discovered that it served as a critical migratory stopover for several species of waterfowl. She organized a petition drive at her school, articulating the scientific reasons why the wetland's preservation was essential to the broader ecosystem. Initially, many of her classmates were indifferent, arguing that one small wetland couldn't make a significant difference. Maya responded by creating an informative presentation that illustrated how the destruction of individual wetlands contributes to cumulative environmental degradation. Her persistent advocacy eventually garnered over three hundred signatures from students and faculty. When Maya presented the petition at the town council meeting, her well-researched arguments so impressed the council members that they agreed to commission an independent environmental impact assessment before making their final decision."}],
    "MOY": [{"id": "6-BM1-MOY", "title": "Sixth Grade: Benchmark 1 (MOY)", "text": "During the school's annual robotics competition, Kai's team encountered a devastating setback when their robot malfunctioned during the semifinal round. The autonomous navigation system, which relied on infrared sensors to detect obstacles and calculate optimal pathways, suddenly began sending erratic signals that caused the robot to veer off course. Autonomous systems are designed to operate independently without human intervention, using sensors and programmed algorithms to make decisions. Kai felt a wave of disappointment wash over him because the team had invested countless hours perfecting their design. While his teammates argued about whether they should attempt a quick repair or concede the round, Kai methodically diagnosed the problem. He discovered that the ambient lighting in the gymnasium was interfering with the infrared sensors, creating phantom readings that confused the navigation algorithm. With only fifteen minutes remaining before their next round, Kai proposed a creative solution: recalibrating the sensors' sensitivity threshold and adding a simple cardboard hood to shield them from overhead light interference. The modification worked perfectly, and their robot completed the final challenge course in record time, advancing them to the championship round."}],
    "EOY": [{"id": "6-BM1-EOY", "title": "Sixth Grade: Benchmark 1 (EOY)", "text": "Sophia discovered that a historical cemetery near her neighborhood, which dated back to the early nineteenth century, was falling into disrepair. Many of the limestone headstones had become illegible due to decades of chemical weathering, a process by which acidic rainwater gradually dissolves calcium carbonate in the stone's surface. Sophia was troubled because the cemetery contained the graves of several historically significant community members, including a renowned abolitionist who had operated a station on the Underground Railroad. She brought the issue to her history teacher, who helped her organize a restoration project. Sophia recruited volunteers from her school and the local historical society. Together, they carefully cleaned the headstones using methods recommended by preservation specialists, documented the inscriptions using photography and pencil rubbings, and created a digital archive of the cemetery's records. The project unexpectedly revealed previously unknown historical connections between the cemetery's occupants and several important events in the region's history. Sophia's work attracted the attention of the county historical commission, which subsequently designated the cemetery as a protected historical site, ensuring its preservation for future generations to study and appreciate."}],
}}
NLM_READING_STORIES["7"] = {"benchmark": {
    "BOY": [{"id": "7-BM1-BOY", "title": "Seventh Grade: Benchmark 1 (BOY)", "text": "When Dante's family relocated to a new city because of his mother's job transfer, he found the adjustment to his new school profoundly challenging. The social dynamics were entirely different from what he had experienced previously; established friend groups seemed impenetrable, and the academic expectations were considerably more rigorous. Dante particularly struggled in his advanced mathematics class, where the curriculum had progressed far beyond what his previous school had covered. He was reluctant to ask for help because he feared that admitting his confusion would confirm his classmates' perception that he was an outsider who didn't belong. His frustration intensified when he received his first failing grade on a geometry examination that tested concepts he had never encountered, including the properties of non-Euclidean geometric systems. Rather than allowing his discouragement to escalate into resignation, Dante made a deliberate decision to seek assistance. He approached his mathematics teacher after class and candidly explained the gaps in his foundational knowledge. His teacher was understanding and connected him with a peer tutoring program. His assigned tutor, Wei, turned out to share Dante's passion for chess and science fiction literature. Through their tutoring sessions, Dante not only strengthened his mathematical understanding but also established his first genuine friendship at his new school."}],
    "MOY": [{"id": "7-BM1-MOY", "title": "Seventh Grade: Benchmark 1 (MOY)", "text": "Amira's documentary film about food insecurity in her community began as a simple class assignment but evolved into something far more consequential. Food insecurity refers to the lack of consistent access to adequate nutritious food for an active, healthy life, and Amira was determined to illuminate this issue through personal narratives rather than statistics alone. She spent weeks conducting interviews with families who relied on local food banks, volunteers who staffed community kitchens, and nutritionists who could articulate the long-term health consequences of inadequate nutrition. The process of hearing these stories profoundly affected Amira, challenging her assumptions and deepening her empathy. When she screened the fifteen-minute documentary for her class, the response was overwhelmingly positive but also uncomfortable; several students had never considered that families in their own community faced such struggles. The school principal, impressed by the documentary's quality and its potential to generate constructive dialogue, arranged for it to be shown at a district-wide assembly. Subsequently, the student government organized a comprehensive food drive that collected over two thousand pounds of non-perishable goods. Amira learned that storytelling could be a powerful catalyst for social change, particularly when it gave voice to those whose experiences were often overlooked."}],
    "EOY": [{"id": "7-BM1-EOY", "title": "Seventh Grade: Benchmark 1 (EOY)", "text": "When a prolonged drought threatened the community garden that served as a vital source of fresh produce for several low-income families in the neighborhood, Nolan decided to engineer a solution. The drought had depleted the municipal water supply to critically low levels, and the city had imposed severe watering restrictions that made conventional irrigation impossible. Nolan researched alternative water conservation techniques and became fascinated by the concept of greywater recycling, which involves filtering and reusing relatively clean household wastewater from sinks, showers, and washing machines for irrigation purposes. He designed a simple filtration system using readily available materials: gravel, sand, and activated charcoal arranged in layers within repurposed five-gallon buckets. The system effectively removed contaminants while allowing the nutrient-rich water to pass through and nourish the garden plants. Nolan presented his prototype to the garden committee, explaining the science behind each filtration layer and demonstrating that the treated water met safety standards for agricultural use. The committee enthusiastically adopted his design, and volunteers constructed ten filtration units that collectively provided enough recycled water to sustain the entire garden throughout the remainder of the drought."}],
}}
NLM_READING_STORIES["8"] = {"benchmark": {
    "BOY": [{"id": "8-BM1-BOY", "title": "Eighth Grade: Benchmark 1 (BOY)", "text": "Isabella's investigation into the declining bee population in her region started with a simple observation: the lavender bushes in her backyard, which had historically attracted dozens of pollinators, were conspicuously devoid of bees that summer. Pollinators are organisms that facilitate plant reproduction by transferring pollen between flowers, and bees are among the most essential pollinators in terrestrial ecosystems. Isabella designed a systematic observational study, cataloging the species and quantity of pollinators visiting gardens throughout her neighborhood over a six-week period. Her data revealed a statistically significant decline compared to historical records maintained by a local naturalist society. She hypothesized that the widespread use of neonicotinoid pesticides in residential landscaping might be contributing to the population decrease. Neonicotinoids are a class of neuro-active insecticides that, even in sub-lethal doses, can impair bees' navigational abilities and foraging efficiency. Isabella compiled her findings into a comprehensive report and presented it to the neighborhood association, proposing the voluntary adoption of pollinator-friendly landscaping practices and the elimination of neonicotinoid-based products. Her presentation was so compelling that the association unanimously voted to establish a pollinator corridor consisting of pesticide-free gardens planted with native flowering species, creating a safe habitat network that would support bee population recovery throughout the neighborhood."}],
    "MOY": [{"id": "8-BM1-MOY", "title": "Eighth Grade: Benchmark 1 (MOY)", "text": "When the school board announced budget cuts that would eliminate the art program, Zara organized a coalition of students to advocate for its preservation. She recognized that the arts were often perceived as expendable compared to STEM subjects, but she was convinced that this perspective fundamentally misunderstood the role of creative education in cognitive development. Zara researched peer-reviewed studies demonstrating that arts education enhances critical thinking, improves academic performance across disciplines, and develops essential skills such as creative problem-solving and emotional intelligence. She discovered that students who participated in arts programs showed measurably higher engagement and lower dropout rates. Armed with this evidence, Zara drafted a formal proposal that addressed the school board's budgetary concerns by suggesting alternative funding mechanisms, including community partnerships, grant applications, and a restructured schedule that would maintain arts instruction at reduced cost. She recruited art students to create a multimedia presentation showcasing the tangible outcomes of their arts education, including portfolio pieces, performance recordings, and testimonials from alumni who had pursued careers in creative industries. At the board meeting, Zara delivered an articulate argument that was simultaneously passionate and data-driven. The board members, visibly moved by the presentation, agreed to maintain the program through a modified funding model that incorporated several of Zara's proposed solutions."}],
    "EOY": [{"id": "8-BM1-EOY", "title": "Eighth Grade: Benchmark 1 (EOY)", "text": "During his eighth-grade capstone project, Mateo designed a prototype for a low-cost water purification system intended for communities in developing regions that lack access to clean drinking water. His motivation stemmed from a documentary he had watched about the global water crisis, which revealed that approximately two billion people worldwide consume water contaminated with pathogenic microorganisms. Mateo's design utilized solar disinfection principles combined with a multi-stage filtration process. The system consisted of a series of transparent PET bottles arranged on a reflective surface to maximize ultraviolet radiation exposure, which effectively neutralizes waterborne bacteria and viruses through a process called SODIS. He supplemented this with a bio-sand filter containing layers of gravel, coarse sand, and fine sand that physically removed particulate matter and parasitic organisms. What distinguished Mateo's design was its emphasis on accessibility: every component could be sourced locally in the target communities, and the system required no electricity or chemical additives to operate. He tested his prototype rigorously, sending water samples to a university laboratory that confirmed his system achieved a ninety-nine percent reduction in coliform bacteria. His project earned first place at the regional science fair and attracted interest from a nonprofit organization that was exploring scalable water purification solutions for implementation in rural Central American communities."}],
}}

DDM_GRIDS = {
    "IRREGULAR_WORDS": [
        ["the", "a", "to", "his", "I", "they", "you", "was"],
        ["said", "she", "do", "he", "some", "have", "little", "my"],
        ["like", "what", "were", "is", "love", "come", "are", "me"],
        ["how", "of", "this", "find", "where", "your", "over", "could"],
        ["from", "into", "who", "go", "here", "soon", "saw", "new"],
        ["good", "all", "no", "there", "away", "down", "does", "one"],
        ["out", "their", "off", "day", "would", "see"],
    ],
    "LETTER_SOUNDS": [
        ["M", "h", "S", "w", "e", "d", "v", "X"],
        ["H", "D", "F", "M", "J", "m", "th", "N"],
        ["W", "V", "G", "P", "I", "z", "L", "k"],
        ["f", "c", "y", "g", "j", "n", "B", "Y"],
        ["Q", "b", "O", "T", "r", "u", "E", "Z"],
        ["i", "p", "s", "C", "x", "a", "q", "R"],
        ["o", "l", "K", "t", "U", "A", "Sh", "ph"],
        ["ch", "wh", "Ch", "Th", "Qu", "Wh"],
    ],
    "LETTER_NAMES": [
        ["O", "t", "B", "Z", "I", "z", "j", "w"],
        ["l", "o", "r", "f", "A", "x", "g", "p"],
        ["e", "F", "R", "M", "q", "N", "H", "h"],
        ["n", "G", "u", "V", "D", "C", "U", "Q"],
        ["W", "i", "J", "O", "c", "P", "S", "a"],
        ["L", "v", "Y", "M", "y", "X", "b", "s"],
        ["E", "K", "d", "k", "T"],
    ],
}

DDM_DECODING_WORDS = {
    "CLOSED_SYLLABLES": ["min", "sal", "jom", "vun", "quim", "whav", "fap", "deg", "gib", "les", "pag", "rud", "tus", "baf", "shil", "het", "wan", "kex", "zick", "chom", "thuz", "vill", "cass", "noff"],
    "VCE": ["naze", "gude", "mepe", "sule", "wonkide", "atane", "jime", "tebe", "goke", "fene", "vome", "rame", "sove"],
    "BASIC_AFFIXES": ["hezes", "pafed", "senest", "bruful", "temness", "premiv", "foting", "unron", "repog", "miver", "dutless", "giply"],
    "ADVANCED_AFFIXES": ["mubtion", "discla", "gobic", "mavible", "gopture", "gepous", "bimog", "trizom", "nonplut", "zikable", "misdut", "transbub", "uniquin", "virupt"],
    "VOWEL_TEAMS": ["feep", "naig", "touv", "keat", "heag", "goupaik", "zay", "loak", "zoon", "soud", "wook", "poig", "shaw", "hieb", "roef", "zow", "bewk", "pauk"],
    "VOWEL_R_CONTROLLED": ["klar", "ner", "foarp", "mour", "lare", "lirparg", "tor", "wir", "ploor", "rark", "zair", "kear", "zur", "theer", "glier", "searc", "lourt", "vour", "slore"],
    "COMPLEX_VOWELS": ["vind", "nild", "zough", "keigh", "glaught", "kighdost", "vost", "grol", "figh", "pight", "wought", "pough"],
    "ADVANCED_WORD_FORMS": ["wecent", "smink", "lomb", "glistle", "ohong", "grombacent", "brism", "grunk", "mank", "ghosl", "futle"],
    "WORDS_IN_CONTEXT": "David made a new game. He called it Tembog. It used a lot of new words. David played the game with a stick that he called a stodrun. The game also used a big block with a hole in it that he called a goupaik. A player throws the stick through the hole in the block. If they miss, it is called a lirparg. If you get the stick through the hole, that is called a kighdost. They get one point. There are other people in the game called ungobers. They try to take the block away. If they take the block away, then they get a second block called a bimudgeic. If they take the block away again, then they get a golden block called a poughnigild. If they take the block away a third time, then they get a glowing block called a grombacent. Once anyone has a glowing block, they can exchange, or generate it for a very large block. Each player on the team wears lirmarves to protect them, which are made out of foam.",
}


@router.get("/stories/{grade}/{time_of_year}")
def get_stories(grade: str, time_of_year: str, assessment_type: str = "benchmark"):
    stories = NLM_READING_STORIES.get(grade, {}).get(assessment_type, {}).get(time_of_year, [])
    return {"grade": grade, "time_of_year": time_of_year, "stories": stories}


@router.get("/ddm-grid/{target}")
def get_ddm_grid(target: str):
    grid = DDM_GRIDS.get(target)
    if grid:
        return {"target": target, "type": "grid", "data": grid}
    words = DDM_DECODING_WORDS.get(target)
    if words:
        return {"target": target, "type": "word_list", "data": words}
    return {"target": target, "type": "not_found", "data": None}
